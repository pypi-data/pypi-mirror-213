(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4815],{86054:function(e,t,n){"use strict";var i=n(90849),r=n(90089),o=n(34896),l=n(24246),s=["title","children"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.children,i=(0,r.Z)(e,s);return(0,l.jsxs)(o.xu,c(c({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},i),{},{children:[(0,l.jsx)(o.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:t}),(0,l.jsx)(o.Kq,{p:6,spacing:6,children:n})]}))}},71576:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return le}});var i=n(34896),r=n(51471),o=n(27378),l=n(73679),s=n(55732),a=n(97865),c=n(34707),d=n.n(c),u=n(70409),p=n(21084),f=n(83125),m=n(29549),h=n(63238),x=n(64835),v=n(29073),g=n(6848),b=n(78624),y=n(24753),j=n(44047),_=n(21023),w=n(90849),O=n(29470),C=n(5008),E=n(55447),P=new Map([["string","Single Select"],["string[]","Multi Select"],["open-text","Open Text"]]),S=new Map([[_.P6.SYSTEM,"system:information"],[_.P6.DATA_USE,"taxonomy:data use"],[_.P6.DATA_CATEGORY,"taxonomy:data category"],[_.P6.DATA_SUBJECT,"taxonomy:data subject"],[_.P6.PRIVACY_DECLARATION,"system:data use"]]),T=n(24246);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n=null!==(t=S.get(e.value))&&void 0!==t?t:e.value;return(0,T.jsx)(x.gk,L(L({},e),{},{value:n}))},A=function(e){var t=e.row.original.allow_list_id?e.value:"open-text";return(0,T.jsx)(x.N0,L(L({map:P,backgroundColor:"gray.500"},e),{},{value:t}))},N=function(e){var t=(0,j.yM)(),n=(0,a.Z)(t,1)[0],i=e.row,r=function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(L(L({},i.original),{},{active:t}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsx)(x.S1,L(L({},e),{},{onToggle:r,title:"Disable custom field",message:"Are you sure you want to disable this custom field?"}))},Z={_hover:{color:"complimentary.500"}},I=function(e){var t=e.row,n=e.column,r=(0,p.qY)();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(O.v2,{size:"sm",children:[(0,T.jsx)(O.j2,{as:m.zx,variant:"outline","data-testid":"more-actions-btn",size:"xs",onClick:function(e){e.stopPropagation()},children:(0,T.jsx)(C.nX,{})}),(0,T.jsxs)(O.qy,{children:[(0,T.jsx)(h.ZP,{scopes:[_.Sh.CUSTOM_FIELD_DELETE],children:(0,T.jsx)(O.sN,L(L({},Z),{},{onClick:function(e){e.stopPropagation(),r.onOpen()},"data-testid":"delete-btn",children:"Delete"}))}),(0,T.jsx)(h.ZP,{scopes:[_.Sh.CUSTOM_FIELD_UPDATE],children:(0,T.jsx)(O.sN,L(L({},Z),{},{onClick:function(e){e.stopPropagation(),n.onEdit(t.original)},"data-testid":"edit-btn",children:"Edit"}))})]})]}),(0,T.jsx)(E.Z,{isOpen:r.isOpen,onClose:r.onClose,onConfirm:function(){n.onDelete(t.original),r.onClose()},title:"Delete custom field",message:(0,T.jsx)(i.xv,{color:"gray.500",children:"Are you sure you want to delete this custom field? This will remove the custom field and all stored values and this action can't be undone."}),continueButtonText:"Confirm",isCentered:!0,icon:(0,T.jsx)(C.aN,{})})]})},z=n(60530),U=n(14275),R=n(9408),F=n(34090),M=n(68301),H=n(83640),q=n(7280),X=n(86054),W=n(43139),G=n(96156);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=Y(Y({},H.s),{},{minWidth:"unset"}),$=function(e){var t=e.values,n=e.validationSchema,r=e.errors,l=e.dirty,a=e.isValid,c=e.isSubmitting,u=e.isLoading,p=e.onClose,f=e.handleDropdownChange,h=e.isEditing,x=(0,F.u6)().validateForm;return(0,o.useEffect)((function(){x()}),[n,x]),(0,T.jsxs)(F.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[(0,T.jsx)(i.xu,{py:3,children:(0,T.jsxs)(X.Z,{title:"Field Information",children:[(0,T.jsx)(H.Z,{displayHelpIcon:!0,isRequired:!0,label:"Name",name:"name",customLabelProps:V}),(0,T.jsx)(H.Z,{displayHelpIcon:!0,label:"Description",name:"description",customLabelProps:V}),(0,T.jsx)(W.AP,{label:"Location",name:"resource_type",options:U.C7,labelProps:V,isDisabled:h})]})}),(0,T.jsx)(i.xu,{py:3,children:(0,T.jsxs)(X.Z,{title:"Configuration",children:[(0,T.jsx)(W.AP,{label:"Field Type",name:"field_type",options:U.Hn,onChange:function(){var e=(0,s.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(t.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),t.field_type!==U.Uv.OPEN_TEXT?(0,T.jsx)(i.kC,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:(0,T.jsx)(F.F2,{name:"allow_list.allowed_values",render:function(e){var n=t.allow_list.allowed_values;return(0,T.jsxs)(i.kC,{flexDirection:"column",gap:"6",pl:"6",children:[(0,T.jsx)(i.kC,{flexDirection:"column",children:n.map((function(t,r){return(0,T.jsxs)(i.kC,{flexGrow:1,gap:"3",mt:r>0?3:void 0,children:[(0,T.jsx)(H.Z,{customLabelProps:{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",minW:"126px",pr:"8px"},displayHelpIcon:!1,isRequired:!0,label:"List item ".concat(r+1),name:"allow_list.allowed_values[".concat(r,"]")}),(0,T.jsx)(m.hU,{"aria-label":"Remove this list value","data-testid":"remove-list-value-btn-".concat(r),icon:(0,T.jsx)(G.l,{}),isDisabled:n.length<=1,onClick:function(){return e.remove(r)},size:"sm",variant:"ghost"})]},r)}))}),(0,T.jsxs)(i.kC,{alignItems:"center",children:[(0,T.jsx)(i.xv,{color:"gray.600",fontSize:"xs",fontWeight:"500",lineHeight:"16px",pr:"8px",children:"Add a list value"}),(0,T.jsx)(m.hU,{"aria-label":"Add a list value","data-testid":"add-list-value-btn",icon:(0,T.jsx)(q.d,{h:"7px",w:"7px"}),onClick:function(){e.push("")},size:"xs",variant:"outline"}),0===n.length&&null!==r&&void 0!==r&&r.allow_list?(0,T.jsx)(i.xv,{color:"red.500",pl:"18px",size:"sm",children:r.allow_list.allowed_values}):null]})]})}})}):null]})}),(0,T.jsxs)(i.kC,{justifyContent:"space-between",width:"100%",children:[(0,T.jsx)(m.zx,{size:"sm",variant:"outline",mr:3,onClick:p,"data-testid":"cancel-btn",isDisabled:u||c,children:"Cancel"}),(0,T.jsx)(m.zx,{size:"sm",type:"submit",colorScheme:"primary","data-testid":"save-btn",isLoading:u,isDisabled:!l||!a||c,children:"Save"})]})]})};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={description:"",field_type:U.Uv.OPEN_TEXT,name:"",resource_type:_.P6.SYSTEM,allow_list:{name:"",description:"",allowed_values:[]}},ee=M.IX(M.Z_().optional().label("allowed_values")),te=M.IX(M.Z_().required("List item is required")).min(1,"Must add at least one list value").label("allowed_values"),ne=M.Ry().shape({name:M.Z_().required("Name is required").trim(),allow_list:M.Ry().shape({allowed_values:ee})}),ie=M.Ry().shape({name:M.Z_().required("Name is required").trim(),allow_list:M.Ry().shape({allowed_values:te})}),re=function(e){var t=e.isOpen,n=e.onClose,i=e.isLoading,r=e.customField,l=(0,R.VY)(),c=l.errorAlert,u=l.successAlert,p=(0,j.Ld)(),f=(0,a.Z)(p,1)[0],m=(0,j.yM)(),h=(0,a.Z)(m,1)[0],x=(0,j.Nt)(),v=(0,a.Z)(x,1)[0],g=(0,j.vA)(null===r||void 0===r?void 0:r.allow_list_id,{skip:!(null!==r&&void 0!==r&&r.allow_list_id)}),y=g.data,w=g.isLoading,O=(0,o.useState)(ne),C=O[0],E=O[1];if(w||!t)return null;var P=function(e,t){var n,i,r;if(e){var o;e.field_type!==_.AL.STRING||e.allow_list_id||(o=U.Uv.OPEN_TEXT),e.field_type===_.AL.STRING&&e.allow_list_id&&(o=U.Uv.SINGLE_SELECT),e.field_type===_.AL.STRING_&&e.allow_list_id&&(o=U.Uv.MULTIPLE_SELECT);var l=t?{name:null!==(n=t.name)&&void 0!==n?n:"",description:null!==(i=t.description)&&void 0!==i?i:"",allowed_values:null!==(r=t.allowed_values)&&void 0!==r?r:[]}:Q.allow_list;return K(K({},e),{},{field_type:o||U.Uv.OPEN_TEXT,allow_list:l})}}(r,y),S=!!P,D=P||Q,L=function(e){e===U.Uv.OPEN_TEXT?E(ne):E(ie)},k=function(){var e=(0,s.Z)(d().mark((function e(t){var i,o,l,s,a,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![U.Uv.SINGLE_SELECT,U.Uv.MULTIPLE_SELECT].includes(t.field_type)){e.next=12;break}if(!(new Set(null===(i=t.allow_list)||void 0===i?void 0:i.allowed_values.map((function(e){return e.toLowerCase().trim()})).map((function(e){return e}))).size<t.allow_list.allowed_values.length)){e.next=5;break}return c("List item value must be unique"),e.abrupt("return");case 5:return o=t.allow_list,t.allow_list_id&&(o.id=t.allow_list_id),o.name||(o.name=Date.now().toString()+Math.random().toString()),e.next=10,v(o);case 10:"error"in(l=e.sent)||t.allow_list_id||(t.allow_list_id=null===(s=l.data)||void 0===s?void 0:s.id);case 12:if(t.field_type===U.Uv.OPEN_TEXT&&(t.allow_list_id=void 0),[U.Uv.SINGLE_SELECT,U.Uv.OPEN_TEXT].includes(t.field_type)&&(t.field_type=_.AL.STRING),t.field_type===U.Uv.MULTIPLE_SELECT&&(t.field_type=_.AL.STRING_),delete(a=K({},t)).allow_list,!r){e.next=23;break}return e.next=20,h(a);case 20:e.t0=e.sent,e.next=26;break;case 23:return e.next=25,f(a);case 25:e.t0=e.sent;case 26:"error"in(p=e.t0)?c((0,b.e$)(p.error),"Custom field has failed to save due to the following:"):(n(),u("Custom field successfully saved"));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)(z.u_,{id:"custom-field-modal-hello-world",isOpen:t,onClose:n,size:"lg",returnFocusOnClose:!1,isCentered:!0,children:[(0,T.jsx)(z.ZA,{}),(0,T.jsxs)(z.hz,{id:"modal-content",textAlign:"center","data-testid":"custom-field-modal",maxHeight:"80%",overflowY:"auto",children:[(0,T.jsx)(z.xB,{id:"modal-header",fontWeight:"semibold",lineHeight:5,fontSize:"sm",textAlign:"left",py:"18px",px:6,height:"56px",backgroundColor:"gray.50",borderColor:"gray.200",borderWidth:"0px 0px 1px 1p",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxSizing:"border-box",children:r?"Manage Custom Field":"Add a custom field"}),(0,T.jsx)(z.fe,{px:6,py:0,children:(0,T.jsx)(F.J9,{initialValues:D,validationSchema:C,onSubmit:k,enableReinitialize:!0,validateOnChange:!0,children:function(e){return(0,T.jsx)($,K({isEditing:S,validationSchema:C,isLoading:i,onClose:n,handleDropdownChange:L},e))}})})]})]})},oe=function(){var e=(0,u.pm)(),t=(0,j.GH)().isLoading,n=(0,g.C)(j.fN),r=(0,j.UF)(),c=(0,a.Z)(r,1)[0],w=(0,p.qY)(),O=w.isOpen,C=w.onClose,E=w.onOpen,P=(0,o.useState)(void 0),S=P[0],D=P[1],L=(0,h.Tg)([_.Sh.CUSTOM_FIELD_UPDATE]),Z=(0,h.Tg)([_.Sh.CUSTOM_FIELD_DELETE]),z=function(e){L&&(D(e),E())},U=function(){var t=(0,s.Z)(d().mark((function t(n){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z||!n.id){t.next=8;break}return t.next=3,c({id:n.id});case 3:if(i=t.sent,!(0,b.D4)(i)){t.next=7;break}return e((0,y.Vo)((0,b.e$)(i.error))),t.abrupt("return");case 7:e((0,y.t5)("Custom field deleted"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){D(void 0),C()},F=(0,o.useMemo)((function(){return[{Header:"Label",accessor:"name",Cell:x.YT},{Header:"Description",accessor:"description",Cell:x.gk},{Header:"Field Type",accessor:"field_type",Cell:A},{Header:"Locations",accessor:"resource_type",Cell:k},{Header:"Enable",accessor:function(e){return!e.active},disabled:!L,Cell:N}]}),[L]);if(t)return(0,T.jsx)(i.kC,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,T.jsx)(f.$,{})});var M=(0,T.jsx)(h.ZP,{scopes:[_.Sh.CUSTOM_FIELD_DEFINITION_CREATE],children:(0,T.jsx)(m.zx,{size:n.length>0?"xs":"sm",colorScheme:n.length>0?"primary":void 0,variant:0===n.length?"outline":void 0,fontWeight:0===n.length?"semibold":void 0,minWidth:0===n.length?"auto":void 0,"data-testid":"add-custom-field-btn",onClick:E,children:"Add a custom field +"})});return 0===n.length?(0,T.jsxs)(i.xu,{maxWidth:"720px",children:[(0,T.jsx)(i.xv,{fontSize:"sm",lineHeight:5,fontWeight:"medium",marginBottom:6,children:"Custom fields provide organizations with the capability to capture metrics that are unique to their specific needs, allowing them to create customized reports. These fields can be added to either systems or elements within a taxonomy, and once added, they become reportable fields that are visible on the data map."}),(0,T.jsx)(v.Z,{title:"It looks like it\u2019s your first time here!",button:M,description:(0,T.jsxs)(T.Fragment,{children:["You haven\u2019t created any custom fields yet. To create a custom field, click on the"," ",(0,T.jsx)("strong",{children:'"Add a custom field"'})," button"]})}),O?(0,T.jsx)(re,{customField:S,isOpen:O,onClose:R,isLoading:!1}):null]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(i.xu,{maxWidth:"600px",children:(0,T.jsx)(i.xv,{marginBottom:10,fontSize:"sm",children:n.length>0?"Custom fields enable you to capture metrics specific to your organization and have those metrics appear in the data map and in reports.":"Custom fields provide organizations with the capability to capture metrics that are unique to their specific needs, allowing them to create customized reports. These fields can be added to either systems or elements within a taxonomy, and once added, they become reportable fields that are visible on the data map."})}),(0,T.jsxs)(i.xu,{padding:2,"data-testid":"custom-fields-page",children:[(0,T.jsx)(x.iX,{columns:F,data:n,showSearchBar:!0,searchBarPlaceHolder:"Search for a custom field",onRowClick:L?z:void 0,customHooks:[function(e){(L||Z)&&e.visibleColumns.push((function(e){return[].concat((0,l.Z)(e),[{id:"more-actions",Header:function(){return null},Cell:I,width:"50px",onEdit:z,onDelete:U}])}))}],footer:(0,T.jsx)(x.vr,{totalColumns:F.length+1,children:M})}),O?(0,T.jsx)(re,{customField:S,isOpen:O,onClose:R,isLoading:!1}):null]})]})},le=function(){return(0,T.jsx)(r.Z,{title:"Custom fields",children:(0,T.jsxs)(i.xu,{"data-testid":"custom-fields-management",children:[(0,T.jsx)(i.X6,{marginBottom:4,fontSize:"2xl",children:"Manage custom fields"}),(0,T.jsx)(oe,{})]})})}},37143:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/custom-fields",function(){return n(71576)}])}},function(e){e.O(0,[2141,5527,8301,6155,4196,8659,9,3119,9534,9774,2888,179],(function(){return t=37143,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2321],{6458:function(e,t,n){"use strict";n.d(t,{bj:function(){return i},TI:function(){return a},pt:function(){return o},nM:function(){return c},A5:function(){return l},P$:function(){return u},tb:function(){return d}});var r=n(13018),s=n(24246),i=(0,r.IU)({displayName:"AWSLogo",viewBox:"0 0 34 34",path:(0,s.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{width:"34",height:"34",rx:"6",fill:"#EDF2F7"}),(0,s.jsx)("path",{d:"M23.3333 9.65348V15.1397L23.3375 15.144L27.6708 16.6979C28.4667 17.0284 29 17.8053 29 18.6767V24.0938C29 24.9266 28.5125 25.6778 27.7667 25.9954L23.4333 27.8455C22.9417 28.0515 22.3917 28.0515 21.9 27.8455L17 25.755L12.1 27.8455C11.6083 28.0515 11.0583 28.0515 10.5667 27.8455L6.23542 25.9954C5.4875 25.6778 5 24.9266 5 24.0938V18.6767C5 17.8053 5.53167 17.0284 6.32792 16.6979L10.6625 15.144L10.6667 15.1397V9.65348C10.6667 8.78253 11.2 8.00559 11.9958 7.71284L16.3292 6.11986C16.7625 5.96005 17.2375 5.96005 17.6708 6.11986L22.0042 7.71284C22.8 8.00559 23.3333 8.78253 23.3333 9.65348ZM17.225 7.41366C17.0792 7.36043 16.9208 7.36043 16.775 7.41366L12.4417 9.0066C12.3458 9.04223 12.2583 9.10017 12.1917 9.17272L16.9625 11.0704L21.8083 9.17272C21.7417 9.10017 21.6542 9.04223 21.5583 9.0066L17.225 7.41366ZM12.0042 15.144L16.2958 16.7322V12.2809L11.9625 10.5682V15.1397L12.0042 15.144ZM17.6667 16.7322L21.9958 15.144L22 15.1397V10.5682L17.6667 12.2809V16.7322ZM11.6292 20.9689V26.5406L16.2958 24.5531V19.2347L11.6292 20.9689ZM6.745 24.7291L10.2958 26.2572V20.9474L6.29583 19.2648V24.0938C6.29583 24.3686 6.49583 24.6218 6.745 24.7291ZM22.3333 20.9689L17.6667 19.2347V24.5531L22.3333 26.5406V20.9689ZM23.6667 26.2572L27.2542 24.7291C27.5042 24.6218 27.6667 24.3686 27.6667 24.0938V19.2648L23.6667 20.9474V26.2572ZM11.5583 16.436C11.4125 16.3845 11.2542 16.3845 11.1083 16.436L6.85625 17.9985L11.0167 19.7498L15.7708 17.9856L11.5583 16.436ZM18.2292 17.9856L22.9833 19.7498L27.1417 17.9985L22.8917 16.436C22.7458 16.3845 22.5875 16.3845 22.4417 16.436L18.2292 17.9856Z",fill:"#111439"})]})}),a=(0,r.IU)({displayName:"CopyIcon",viewBox:"0 0 18 18",path:(0,s.jsx)("path",{fill:"currentColor",d:"M15 3.75V0H10.625C9.58945 0 8.75 0.839453 8.75 1.875V13.125C8.75 14.1605 9.58945 15 10.625 15H18.125C19.1605 15 20 14.1605 20 13.125V5H16.2852C15.5625 5 15 4.4375 15 3.75ZM16.25 0V3.75H20L16.25 0ZM7.5 13.75V5H1.875C0.839453 5 0 5.83945 0 6.875V18.125C0 19.1605 0.839453 20 1.875 20H9.375C10.4105 20 11.25 19.1605 11.25 18.125V16.25H10C8.62109 16.25 7.5 15.1289 7.5 13.75Z"})}),o=(0,r.IU)({displayName:"DataFlowScannerLogo",viewBox:"0 0 34 34",path:(0,s.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{width:"34",height:"34",rx:"6",fill:"#EDF2F7"}),(0,s.jsx)("path",{d:"M19.4062 12.875C19.4062 13.6398 19.0496 14.3187 18.4953 14.7613L19.5309 17.3523C19.6039 17.348 19.6769 17.3438 19.75 17.3438C21.0777 17.3438 22.1562 18.4223 22.1562 19.75C22.1562 21.0777 21.0777 22.1562 19.75 22.1562C18.4953 22.1562 17.4641 21.198 17.3523 19.9734L15.0019 19.5008C14.598 20.2613 13.7988 20.7812 12.875 20.7812C11.5473 20.7812 10.4687 19.7027 10.4687 18.375C10.4687 17.0473 11.5473 15.9688 12.875 15.9688C13.1672 15.9688 13.4508 16.0203 13.7086 16.1191L15.0277 14.3059C14.7699 13.9062 14.5937 13.4121 14.5937 12.8363C14.5937 11.5473 15.6723 10.4301 17 10.4301C18.3277 10.4301 19.4062 11.5473 19.4062 12.8363V12.875ZM18.2547 17.8637L17.2191 15.2727C17.1461 15.277 17.073 15.2812 17 15.2812C16.7078 15.2812 16.4242 15.2297 16.1664 15.1309L14.8086 16.9441C15.0621 17.2879 15.2297 17.7004 15.2726 18.1516L17.623 18.6242C17.7777 18.3277 17.9969 18.0699 18.2547 17.8637ZM17 13.9062C17.5715 13.9062 18.0312 13.4465 18.0312 12.875C18.0312 12.3035 17.5715 11.8438 17 11.8438C16.4285 11.8438 15.9687 12.3035 15.9687 12.875C15.9687 13.4465 16.4285 13.9062 17 13.9062ZM19.75 18.7188C19.1785 18.7188 18.7187 19.1785 18.7187 19.75C18.7187 20.3215 19.1785 20.7812 19.75 20.7812C20.3215 20.7812 20.7812 20.3215 20.7812 19.75C20.7812 19.1785 20.3215 18.7188 19.75 18.7188ZM12.875 19.4062C13.4465 19.4062 13.9062 18.9465 13.9062 18.375C13.9062 17.8035 13.4465 17.3438 12.875 17.3438C12.3035 17.3438 11.8437 17.8035 11.8437 18.375C11.8437 18.9465 12.3035 19.4062 12.875 19.4062ZM21.3613 7.375C22.1004 7.375 22.7793 7.76816 23.1488 8.40668L27.5101 15.9688C27.8797 16.609 27.8797 17.391 27.5101 17.9926L23.1488 25.5551C22.7793 26.2297 22.1004 26.625 21.3613 26.625H12.6387C11.8996 26.625 11.2207 26.2297 10.8512 25.5551L6.48855 17.9926C6.12044 17.391 6.12044 16.609 6.48855 15.9688L10.8512 8.40668C11.2207 7.76816 11.8996 7.375 12.6387 7.375H21.3613ZM7.67964 16.6562C7.55675 16.8324 7.55675 17.1289 7.67964 17.3051L12.0414 24.8676C12.166 25.1168 12.3937 25.25 12.6387 25.25H21.3613C21.6062 25.25 21.834 25.1168 21.9586 24.8676L26.3199 17.3051C26.4445 17.1289 26.4445 16.8324 26.3199 16.6562L21.9586 9.09375C21.834 8.88105 21.6062 8.75 21.3613 8.75H12.6387C12.3937 8.75 12.166 8.88105 12.0414 9.09375L7.67964 16.6562Z",fill:"#111439"})]})}),c=(0,r.IU)({displayName:"DownloadLightIcon",viewBox:"0 0 16 16",d:"M12.25 8.3125H10.7871L9.47461 9.625H12.25C12.4912 9.625 12.6875 9.82127 12.6875 10.0625V12.25C12.6875 12.4912 12.4912 12.6875 12.25 12.6875H1.75C1.50877 12.6875 1.3125 12.4912 1.3125 12.25V10.0625C1.3125 9.82187 1.50883 9.625 1.75 9.625H4.52539L3.21289 8.3125H1.75C0.783399 8.3125 0 9.0959 0 10.0625V12.25C0 13.2166 0.783399 14 1.75 14H12.25C13.2166 14 14 13.2166 14 12.25V10.0625C14 9.09727 13.2152 8.3125 12.25 8.3125ZM11.8125 11.1562C11.8125 10.7937 11.5186 10.5 11.1562 10.5C10.7939 10.5 10.5 10.7926 10.5 11.1562C10.5 11.5186 10.7939 11.8125 11.1562 11.8125C11.5186 11.8125 11.8125 11.5199 11.8125 11.1562ZM6.53516 10.0652C6.66367 10.2184 6.83047 10.2812 7 10.2812C7.16953 10.2812 7.33578 10.2172 7.46402 10.089L11.1828 6.37025C11.4391 6.1139 11.4391 5.69868 11.1828 5.4422C10.9264 5.18572 10.5112 5.18585 10.2547 5.4422L7.65625 8.0418V0.65625C7.65625 0.293945 7.36367 0 7 0C6.63633 0 6.34375 0.293945 6.34375 0.65625V8.0418L3.72148 5.44141C3.46514 5.18506 3.04992 5.18506 2.79344 5.44141C2.53695 5.69775 2.53709 6.11297 2.79344 6.36945L6.53516 10.0652Z"}),l=(0,r.IU)({displayName:"GearLightIcon",viewBox:"0 0 16 16",d:"M1.50505 11.75C1.188 11.2017 0.941544 10.6156 0.771545 10.0055C1.14153 9.81731 1.45224 9.53046 1.66932 9.17666C1.88639 8.82286 2.00137 8.41591 2.00152 8.00082C2.00168 7.58574 1.88701 7.1787 1.6702 6.82474C1.45339 6.47078 1.14289 6.18369 0.773045 5.99524C1.11207 4.76935 1.75759 3.64995 2.6488 2.74249C2.99687 2.96878 3.40076 3.09436 3.81578 3.10532C4.2308 3.11629 4.64076 3.01221 5.00029 2.80461C5.35983 2.59701 5.65491 2.29399 5.85289 1.92907C6.05087 1.56415 6.14403 1.15157 6.12205 0.736989C7.35363 0.418706 8.64597 0.419222 9.8773 0.738489C9.85551 1.15306 9.94885 1.56558 10.147 1.9304C10.3451 2.29521 10.6403 2.59809 10.9999 2.80553C11.3595 3.01297 11.7695 3.11688 12.1845 3.10575C12.5995 3.09463 13.0033 2.9689 13.3513 2.74249C13.7855 3.18499 14.171 3.68824 14.495 4.24999C14.8198 4.81174 15.0628 5.39749 15.2285 5.99449C14.8586 6.18266 14.5479 6.46952 14.3308 6.82332C14.1137 7.17712 13.9987 7.58407 13.9986 7.99915C13.9984 8.41424 14.1131 8.82128 14.3299 9.17524C14.5467 9.5292 14.8572 9.81629 15.227 10.0047C14.888 11.2306 14.2425 12.35 13.3513 13.2575C13.0032 13.0312 12.5993 12.9056 12.1843 12.8947C11.7693 12.8837 11.3593 12.9878 10.9998 13.1954C10.6403 13.403 10.3452 13.706 10.1472 14.0709C9.94922 14.4358 9.85607 14.8484 9.87805 15.263C8.64646 15.5813 7.35412 15.5808 6.1228 15.2615C6.14458 14.8469 6.05124 14.4344 5.85311 14.0696C5.65498 13.7048 5.35978 13.4019 5.00017 13.1944C4.64057 12.987 4.23059 12.8831 3.81559 12.8942C3.40059 12.9054 2.99677 13.0311 2.6488 13.2575C2.20554 12.8052 1.82124 12.2987 1.50505 11.75ZM5.75005 11.897C6.54927 12.358 7.15018 13.0978 7.43755 13.9745C7.8118 14.0097 8.18754 14.0105 8.56179 13.9752C8.84935 13.0984 9.45054 12.3586 10.25 11.8977C11.049 11.4355 11.9904 11.2846 12.8938 11.474C13.1113 11.168 13.2988 10.8417 13.4548 10.5005C12.8394 9.81307 12.4994 8.92265 12.5 7.99999C12.5 7.05499 12.8525 6.17224 13.4548 5.49949C13.2977 5.15835 13.1094 4.83246 12.8923 4.52599C11.9895 4.71522 11.0486 4.5646 10.25 4.10299C9.45083 3.64202 8.84991 2.90223 8.56255 2.02549C8.1883 1.99024 7.81255 1.98949 7.4383 2.02474C7.15074 2.9016 6.54955 3.64141 5.75005 4.10224C4.95113 4.56447 4.00965 4.71538 3.1063 4.52599C2.88922 4.8322 2.70139 5.15814 2.5453 5.49949C3.16072 6.18691 3.50071 7.07733 3.50005 7.99999C3.50005 8.94499 3.14755 9.82774 2.5453 10.5005C2.7024 10.8416 2.8907 11.1675 3.1078 11.474C4.01058 11.2848 4.95145 11.4354 5.75005 11.897ZM8.00005 10.25C7.40331 10.25 6.83101 10.0129 6.40905 9.59098C5.9871 9.16902 5.75005 8.59673 5.75005 7.99999C5.75005 7.40325 5.9871 6.83096 6.40905 6.409C6.83101 5.98704 7.40331 5.74999 8.00005 5.74999C8.59678 5.74999 9.16908 5.98704 9.59104 6.409C10.013 6.83096 10.25 7.40325 10.25 7.99999C10.25 8.59673 10.013 9.16902 9.59104 9.59098C9.16908 10.0129 8.59678 10.25 8.00005 10.25ZM8.00005 8.74999C8.19896 8.74999 8.38972 8.67097 8.53038 8.53032C8.67103 8.38967 8.75005 8.1989 8.75005 7.99999C8.75005 7.80108 8.67103 7.61031 8.53038 7.46966C8.38972 7.32901 8.19896 7.24999 8.00005 7.24999C7.80113 7.24999 7.61037 7.32901 7.46972 7.46966C7.32906 7.61031 7.25005 7.80108 7.25005 7.99999C7.25005 8.1989 7.32906 8.38967 7.46972 8.53032C7.61037 8.67097 7.80113 8.74999 8.00005 8.74999Z"}),u=(0,r.IU)({displayName:"ManualSetup",viewBox:"0 0 34 34",path:(0,s.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{width:"34",height:"34",rx:"6",fill:"#EDF2F7"}),(0,s.jsx)("path",{d:"M11.3608 26.7673L5.72169 17L11.3608 7.2327L22.6392 7.2327L28.2783 17L22.6392 26.7673L11.3608 26.7673Z",stroke:"#111439",strokeWidth:"1.25"}),(0,s.jsx)("path",{d:"M13.1609 23.6539L9.32179 17.0043L13.1609 10.3547L20.8393 10.3547L24.6784 17.0043L20.8393 23.6539L13.1609 23.6539Z",stroke:"#111439",strokeWidth:"1.25"}),(0,s.jsx)("path",{d:"M14.961 20.5288L12.9219 16.9969L14.961 13.465L19.0393 13.465L21.0785 16.9969L19.0393 20.5288L14.961 20.5288Z",stroke:"#111439",strokeWidth:"1.25"})]})}),d=(0,r.IU)({displayName:"OktaLogo",viewBox:"0 0 34 34",path:(0,s.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{width:"34",height:"34",rx:"6",fill:"#EDF2F7"}),(0,s.jsx)("g",{clipPath:"url(#clip0_3116_111154)",children:(0,s.jsx)("path",{d:"M25.3226 9.32301C24.9804 8.91547 24.3991 8.89093 24.0259 9.26443C23.6532 9.63813 23.6287 10.2711 23.9716 10.6773C26.9141 14.1644 26.9141 19.8356 23.9716 23.3231C23.6287 23.7293 23.6532 24.3623 24.0259 24.736C24.1997 24.9125 24.4251 25 24.6466 25C24.8939 25 25.1412 24.8919 25.3223 24.6771C28.8938 20.4459 28.8938 13.5542 25.3226 9.32301ZM20.9837 12.5459C20.6033 12.9105 20.5655 13.5422 20.9001 13.9571C22.2358 15.6146 22.2358 18.3113 20.9001 19.9696C20.5656 20.385 20.6033 21.0163 20.9837 21.3809C21.1582 21.51 21.3737 21.6296 21.5887 21.6296C21.8438 21.6296 22.0975 21.515 22.2785 21.2897C24.2009 18.9043 24.2009 15.0231 22.2785 12.6356C21.9424 12.2584 21.3657 12.2167 20.9837 12.5459ZM9.97611 9.26468C9.60455 8.89097 9.02354 8.91572 8.6794 9.32326C5.10784 13.5566 5.10784 20.444 8.6794 24.6773C8.85968 24.8917 9.1068 25 9.3543 25C9.57652 25 9.79927 24.9128 9.97534 24.7357C10.3481 24.362 10.3726 23.729 10.0297 23.3228C7.08719 19.8357 7.08719 14.1645 10.0297 10.677C10.3733 10.2709 10.3466 9.63842 9.97611 9.26468ZM13.0164 12.5459C12.6383 12.2167 12.0577 12.2584 11.7216 12.6751C9.79927 15.0605 9.79927 18.9417 11.7216 21.3292C11.9026 21.5544 12.1566 21.669 12.4114 21.669C12.6258 21.669 12.8422 21.587 13.0164 21.4203C13.3969 21.0557 13.4346 20.4241 13.1 20.0091C11.7644 18.3516 11.7644 15.6549 13.1 13.9966C13.4365 13.5792 13.3983 12.9459 13.0164 12.5459ZM17.0001 15.3334C16.1556 15.3334 15.4715 16.0796 15.4715 16.9625C15.4715 17.8455 16.156 18.6667 17.0001 18.6667C17.8442 18.6667 18.5286 17.9205 18.5286 17.0375C18.5286 16.1546 17.8442 15.3334 17.0001 15.3334Z",fill:"#111439"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_3116_111154",children:(0,s.jsx)("rect",{width:"22",height:"22",fill:"white",transform:"translate(6 6)"})})})]})})},44845:function(e,t,n){"use strict";var r=n(90849),s=n(90089),i=n(32751),a=n(5008),o=n(29549),c=n(24246),l=["search","onChange","withIcon","onClear","placeholder"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.search,n=e.onChange,r=e.withIcon,u=e.onClear,f=e.placeholder,h=(0,s.Z)(e,l);return(0,c.jsxs)(i.BZ,{size:"sm",minWidth:"308px",children:[r?(0,c.jsx)(i.Z8,{pointerEvents:"none",children:(0,c.jsx)(a.PT,{color:"gray.300",w:"17px",h:"17px"})}):null,(0,c.jsx)(i.II,d({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:t,name:"search",onChange:function(e){return n(e.target.value)},placeholder:f||""},h)),u?(0,c.jsx)(i.xH,{children:(0,c.jsx)(o.zx,{borderLeftRadius:0,height:"95%",right:"14px",flexShrink:0,fontWeight:"light",size:"sm",onClick:u,children:"Clear"})}):null]})}},88486:function(e,t,n){"use strict";n.d(t,{Gt:function(){return f},eB:function(){return h},oI:function(){return d}});var r=n(34090),s=n(27378),i=n(6848),a=n(55447),o=n(30691),c=n(24246),l=(0,s.createRef)(),u=(0,s.createRef)(),d=function(){var e=(0,i.T)(),t=(0,i.C)(o.DB),n=(0,s.useCallback)((function(){u.current=void 0,l.current=void 0}),[]),r=(0,s.useCallback)((function(){e((0,o.Mr)()),u.current&&(u.current(!0),n())}),[e,n]),a=(0,s.useCallback)((function(){e((0,o.Mr)()),u.current&&(u.current(!1),n())}),[e,n]);return{attemptAction:(0,s.useCallback)((function(){return t?(e((0,o.h7)()),l.current||(l.current=new Promise((function(e){u.current=e}))),l.current):Promise.resolve(!0)}),[t,e]),onConfirm:r,onClose:a}},f=function(e){var t=e.id,n=e.name,a=(0,r.u6)().dirty,c=(0,i.T)();return(0,s.useEffect)((function(){return c((0,o.Zu)({id:t,name:n})),function(){c((0,o.dz)({id:t}))}}),[c,t,n]),(0,s.useEffect)((function(){c((0,o.$p)({id:t,isDirty:a}))}),[a,c,t]),null},h=function(){var e=d(),t=e.onConfirm,n=e.onClose,r=(0,i.C)(o.uv);return(0,c.jsx)(a.Z,{isOpen:r,onClose:n,onConfirm:t,title:"Unsaved Changes",message:"You have unsaved changes"})}},89348:function(e,t,n){"use strict";n.d(t,{q:function(){return E}});var r=n(62332),s=n(27378),i=n(90849),a=n(55732),o=n(97865),c=n(34707),l=n.n(c),u=n(70409),d=n(21084),f=n(34896),h=n(30794),p=n(29549),m=n(78624),y=n(88486),C=n(6458),x=n(40240),j=n(96156),g=n(34090),v=n(24246),b=function(e){var t=e.systems,n=e.dataFlows,r=e.onDataFlowSystemChange,s=(0,g.u6)().setFieldValue,i=n.map((function(e){return e.fides_key}));return(0,v.jsxs)(x.iA,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,v.jsx)(x.hr,{children:(0,v.jsxs)(x.Tr,{children:[(0,v.jsx)(x.Th,{children:"System"}),(0,v.jsx)(x.Th,{})]})}),(0,v.jsx)(x.p3,{children:t.filter((function(e){return i.includes(e.fides_key)})).map((function(e){return(0,v.jsxs)(x.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,v.jsx)(x.Td,{children:(0,v.jsx)(f.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",children:e.name})}),(0,v.jsx)(x.Td,{textAlign:"end",children:(0,v.jsx)(p.hU,{background:"gray.50","aria-label":"Unassign data flow from system",icon:(0,v.jsx)(j.l,{}),variant:"outline",size:"sm",onClick:function(){return function(e){var t=n.filter((function(t){return t.fides_key!==e.fides_key}));s("dataFlowSystems",t),r(t)}(e)},"data-testid":"unassign-btn"})})]},e.fides_key)}))})]})},w=n(60530),k=n(92975),L=n(62709),O=n(44845),S=n(13861),_=n(73679),D=function(e){var t=e.allSystems,n=e.dataFlowSystems,r=e.onChange,s=e.flowType,i=(0,g.u6)().setFieldValue,a=function(e){if(!!n.find((function(t){return t.fides_key===e.fides_key}))){var t=n.filter((function(t){return t.fides_key!==e.fides_key}));i("dataFlowSystems",t),r(t)}else{var s=[].concat((0,_.Z)(n),[{fides_key:e.fides_key,type:"system"}]);i("dataFlowSystems",s),r(s)}};return(0,v.jsx)(f.xu,{overflowY:"auto",maxHeight:"300px",children:(0,v.jsxs)(x.iA,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,v.jsx)(x.hr,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,v.jsxs)(x.Tr,{children:[(0,v.jsx)(x.Th,{children:"System"}),(0,v.jsxs)(x.Th,{textAlign:"right",children:["Set as ",s]})]})}),(0,v.jsx)(x.p3,{children:t.map((function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));return(0,v.jsxs)(x.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,v.jsx)(x.Td,{children:(0,v.jsx)(f.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",children:e.name})}),(0,v.jsx)(x.Td,{textAlign:"right",children:(0,v.jsx)(L.r,{isChecked:t,onChange:function(){return a(e)},"data-testid":"assign-switch"})})]},e.fides_key)}))})]})})},Z=function(e){var t=e.currentSystem,n=e.systems,r=e.isOpen,i=e.onClose,o=e.dataFlowSystems,c=e.onDataFlowSystemChange,u=e.flowType,d=(0,g.u6)().setFieldValue,h=(0,s.useState)(""),m=h[0],y=h[1],C=(0,s.useState)(o),x=C[0],j=C[1],b=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(x),i();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=0===n.length,Z=(0,s.useMemo)((function(){return n?n.filter((function(e){return e.fides_key!==t.fides_key})).filter((function(e){return(0,S.R)(e,m)})):[]}),[n,t.fides_key,m]),P=(0,s.useMemo)((function(){var e=new Set(x.map((function(e){return e.fides_key})));return Z.every((function(t){return e.has(t.fides_key)}))}),[Z,x]);return(0,v.jsxs)(w.u_,{isOpen:r,onClose:i,size:"2xl",isCentered:!0,children:[(0,v.jsx)(w.ZA,{}),(0,v.jsxs)(w.hz,{p:8,"data-testid":"confirmation-modal",children:[(0,v.jsxs)(w.xB,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,v.jsxs)(f.xv,{fontSize:"2xl",lineHeight:8,fontWeight:"semibold",children:["Configure ",u.toLocaleLowerCase()," systems"]}),(0,v.jsxs)(f.Ct,{bg:"green.500",color:"white",px:1,children:["Assigned to ",x.length," systems"]})]}),(0,v.jsx)(w.fe,{"data-testid":"assign-systems-modal-body",children:_?(0,v.jsx)(f.xv,{children:"No systems found"}):(0,v.jsxs)(f.Kq,{spacing:4,children:[(0,v.jsxs)(f.kC,{justifyContent:"space-between",children:[(0,v.jsx)(f.xv,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Add or remove destination systems from your data map"}),(0,v.jsx)(f.xu,{children:(0,v.jsxs)(k.NI,{display:"flex",alignItems:"center",children:[(0,v.jsx)(k.lX,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,v.jsx)(L.r,{size:"sm",id:"assign-all-systems",isChecked:P,onChange:function(e){if(e.target.checked&&n){var t=Z.map((function(e){return{fides_key:e.fides_key,type:"system"}}));d("dataFlowSystems",t),j(t)}else j([])},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,v.jsx)(O.Z,{search:m,onChange:y,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,v.jsx)(D,{flowType:u,allSystems:Z,dataFlowSystems:x,onChange:j})]})}),(0,v.jsx)(w.mz,{justifyContent:"flex-start",children:(0,v.jsxs)(p.hE,{size:"sm",children:[(0,v.jsx)(p.zx,{variant:"outline",mr:2,onClick:i,"data-testid":"cancel-btn",children:"Cancel"}),_?null:(0,v.jsx)(p.zx,{colorScheme:"primary",onClick:b,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},P=n(24753),V=n(6848),F=n(48466),M=n(51860);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={dataFlowSystems:[]},A=function(e){var t=e.system,n=e.isIngress,i=e.isSystemTab,c=(0,u.pm)(),x=n?"Source":"Destination",j="".concat(x,"s"),w=(0,d.qY)(),k=(0,F.qQ)(),L=(0,o.Z)(k,1)[0];(0,F.K3)();var O=(0,V.C)(M.cS),S=(0,s.useMemo)((function(){var e=n?t.ingress:t.egress;e||(e=[]);var r=O?O.map((function(e){return e.fides_key})):[];return e.filter((function(e){return r.includes(e.fides_key)}))}),[n,t,O]),_=(0,s.useState)(S),D=_[0],I=_[1];(0,s.useEffect)((function(){I(S)}),[S]);var A=function(){var e=(0,a.Z)(l().mark((function e(r,s){var i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.dataFlowSystems,a=s.resetForm,o=z(z({},t),{},{ingress:n?i:t.ingress,egress:n?t.egress:i}),e.next=5,L(o);case 5:u=e.sent,(0,m.D4)(u)?c((0,P.Vo)("Failed to update data flows")):c((0,P.t5)("".concat(j," updated"))),a({values:{dataFlowSystems:i}});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,v.jsxs)(r.Qd,{children:[(0,v.jsx)(r.KF,{height:"68px",paddingLeft:i?6:2,"data-testid":"data-flow-button-".concat(x),children:(0,v.jsxs)(f.kC,{alignItems:"center",justifyContent:"start",flex:1,textAlign:"left",children:[(0,v.jsx)(f.xv,{fontSize:"sm",lineHeight:5,fontWeight:"semibold",mr:2,children:j}),(0,v.jsx)(h.Vp,{ml:2,backgroundColor:"primary.400",borderRadius:"6px",color:"white",children:D.length}),(0,v.jsx)(f.LZ,{}),(0,v.jsx)(r.XE,{})]})}),(0,v.jsx)(r.Hk,{backgroundColor:"gray.50",padding:6,"data-testid":"data-flow-panel-".concat(x),children:(0,v.jsx)(f.Kq,{borderRadius:"md",backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:(0,v.jsx)(g.J9,{initialValues:T,onSubmit:A,children:function(e){var n=e.isSubmitting,r=e.dirty,s=e.resetForm;return(0,v.jsxs)(g.l0,{children:[(0,v.jsx)(y.Gt,{id:"".concat(t.fides_key,":").concat(x),name:"".concat(x," Data Flow")}),(0,v.jsx)(p.zx,{colorScheme:"primary",size:"xs",width:"fit-content",onClick:w.onOpen,"data-testid":"assign-systems-btn",rightIcon:(0,v.jsx)(C.A5,{}),marginBottom:4,children:"Configure ".concat(j.toLocaleLowerCase())}),(0,v.jsx)(b,{systems:O,dataFlows:D,onDataFlowSystemChange:I}),(0,v.jsxs)(p.hE,{marginTop:6,children:[(0,v.jsx)(p.zx,{size:"sm",variant:"outline",disabled:!r&&D===S,onClick:function(){I(S),s({values:{dataFlowSystems:S}})},children:"Cancel"}),(0,v.jsx)(p.zx,{size:"sm",colorScheme:"primary",type:"submit",isLoading:n,disabled:!r&&D===S,"data-testid":"save-btn",children:"Save"})]}),w.isOpen?(0,v.jsx)(Z,{currentSystem:t,systems:O,isOpen:w.isOpen,onClose:w.onClose,dataFlowSystems:D,onDataFlowSystemChange:I,flowType:x}):null]})}})})})]})},E=function(e){var t=e.system,n=e.isSystemTab;return(0,v.jsxs)(r.UQ,{allowToggle:!0,"data-testid":"data-flow-accordion",children:[(0,v.jsx)(A,{system:t,isIngress:!0,isSystemTab:n}),(0,v.jsx)(A,{system:t,isSystemTab:n})]})}},13861:function(e,t,n){"use strict";n.d(t,{R:function(){return _},Z:function(){return D}});var r=n(34896),s=n(27378),i=n(14007),a=n(33571),o=n.n(a),c=n(24246),l=function(e){var t=e.columns,n=e.items,s=e.renderItem,a=(0,i.yo)(n,t);return(0,c.jsx)(r.xu,{children:a.map((function(e,n,i){var a=i.length;return(0,c.jsx)(r.xu,{className:o()["grid-row"],borderBottomWidth:a>1&&n===a-1&&e.length===t?"0.5px":void 0,children:(0,c.jsx)(r.MI,{columns:t,children:e.map((function(e){return(0,c.jsx)(r.xu,{className:o()["grid-item"],children:s(e)},JSON.stringify(e))}))})},JSON.stringify(e))}))})},u=n(44845),d=n(55732),f=n(97865),h=n(34707),p=n.n(h),m=n(21084),y=n(70409),C=n(29470),x=n(29549),j=n(5008),g=n(86677),v=n(6848),b=n(55447),w=n(60709),k=n(78624),L=n(24753),O=n(51860),S=function(e){var t=e.system,n=(0,m.qY)(),s=n.isOpen,i=n.onOpen,a=n.onClose,o=(0,y.pm)(),l=(0,v.T)(),u=(0,g.useRouter)(),h=(0,O.DW)(),S=(0,f.Z)(h,1)[0],_=function(){var e=(0,d.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t.fides_key);case 2:n=e.sent,(0,k.D4)(n)?o((0,L.Vo)((0,k.e$)(n.error))):o((0,L.t5)("Successfully deleted system")),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=""===t.name||null==t.name?t.fides_key:t.name;return(0,c.jsxs)(r.xu,{display:"flex","data-testid":"system-".concat(t.fides_key),children:[(0,c.jsxs)(r.xu,{flexGrow:1,p:4,children:[(0,c.jsx)(r.X6,{as:"h2",fontSize:"16px",mb:2,children:D}),(0,c.jsx)(r.xu,{color:"gray.600",fontSize:"14px",children:(0,c.jsx)(r.xv,{children:t.description})})]}),(0,c.jsxs)(C.v2,{children:[(0,c.jsx)(C.j2,{as:x.hU,icon:(0,c.jsx)(j.nX,{}),"aria-label":"more actions",variant:"unstyled",size:"sm","data-testid":"more-btn",m:1}),(0,c.jsxs)(C.qy,{children:[(0,c.jsx)(C.sN,{onClick:function(){l((0,O.db)(t)),u.push("".concat(w.So,"/configure/").concat(t.fides_key))},"data-testid":"edit-btn",children:"Edit"}),(0,c.jsx)(C.sN,{onClick:i,"data-testid":"delete-btn",children:"Delete"})]})]}),(0,c.jsx)(b.Z,{isOpen:s,onClose:a,onConfirm:_,title:"Delete ".concat(D),message:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r.xv,{children:["You are about to permanently delete the system"," ",(0,c.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:D}),"."]}),(0,c.jsx)(r.xv,{children:"Are you sure you would like to continue?"})]})})]})},_=function(e,t){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(t.toLocaleLowerCase()))||(null===(r=e.description)||void 0===r?void 0:r.toLocaleLowerCase().includes(t.toLocaleLowerCase()))},D=function(e){var t=e.systems,n=(0,s.useState)(""),i=n[0],a=n[1],o=(0,s.useMemo)((function(){return t?t.filter((function(e){return _(e,i)})):[]}),[t,i]);return t&&t.length?(0,c.jsxs)(r.xu,{"data-testid":"system-management",children:[(0,c.jsx)(r.xu,{mb:4,"data-testid":"system-filters",children:(0,c.jsx)(u.Z,{search:i,onChange:a,maxWidth:"30vw",placeholder:"Search system name or description","data-testid":"system-search",withIcon:!0})}),(0,c.jsx)(l,{columns:3,items:o,renderItem:function(e){return(0,c.jsx)(S,{system:e})}})]}):(0,c.jsx)("div",{"data-testid":"empty-state",children:"No systems registered."})}},66090:function(e,t,n){"use strict";n.d(t,{Z:function(){return J}});var r=n(73679),s=n(55732),i=n(97865),a=n(90849),o=n(90089),c=n(34707),l=n.n(c),u=n(70409),d=n(34896),f=n(9992),h=n(29549),p=n(27378),m=n(78624),y=n(24753),C=n(51860),x=n(33167),j=n(62332),g=n(34090),v=n(88486),b=n(21084),w=n(5008),k=n(14275),L=n(68301),O=n(55447),S=n(43139),_=n(21023),D=n(24246),Z=["customFieldValues"],P=["onSubmit","initialValues","onDelete"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=L.Ry().shape({data_categories:L.IX(L.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:L.Z_().required().label("Data use"),data_subjects:L.IX(L.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),I={data_categories:[],data_subjects:[],data_use:"",dataset_references:[],customFieldValues:{},id:""},z=function(e){var t=e.id,n=e.name,r=e.data_use,s=t;return s||(s=n?"".concat(r," - ").concat(n):r),F(F({},e),{},{id:s})},T=function(e){return e.map(z)},A=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,i=e.allDatasets,a=e.onDelete,o=e.privacyDeclarationId,c=e.includeCustomFields,u=(0,g.u6)(),f=u.dirty,p=u.isSubmitting,m=u.isValid,y=u.initialValues,C=(0,b.qY)(),x=i?i.map((function(e){var t;return{label:null!==(t=e.name)&&void 0!==t?t:e.fides_key,value:e.fides_key}})):[],j=function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(z(y));case 2:C.onClose();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=""===y.data_use;return(0,D.jsxs)(d.Kq,{spacing:4,children:[(0,D.jsx)(S.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:!!o}),(0,D.jsx)(S.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",tooltip:"The personal data processing activity or activities associated with this data use.",disabled:!!o}),(0,D.jsx)(S.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked"}),(0,D.jsx)(S.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked"}),i?(0,D.jsx)(S.AP,{name:"dataset_references",label:"Dataset references",options:x,tooltip:"Referenced Dataset fides keys used by the system.",isMulti:!0,variant:"stacked"}):null,c?(0,D.jsx)(k.uc,{resourceType:_.P6.PRIVACY_DECLARATION,resourceFidesKey:o}):null,(0,D.jsxs)(h.hE,{size:"sm",display:"flex",justifyContent:"space-between",children:[(0,D.jsx)(h.zx,{variant:"outline",onClick:C.onOpen,disabled:v,"data-testid":"delete-btn",children:"Delete"}),(0,D.jsx)(h.zx,{type:"submit",colorScheme:"primary",disabled:!f||!m,isLoading:p,"data-testid":"save-btn",children:"Save"})]}),(0,D.jsx)(O.Z,{onConfirm:j,title:"Delete data use",message:"Are you sure you want to delete this data use? This action can't be undone.",isOpen:C.isOpen,onClose:C.onClose,isCentered:!0})]})},E=function(e){var t=e.onSubmit,n=e.initialValues,r=e.allDataUses,i=e.privacyDeclarationId,a=(0,k.mZ)({resourceType:_.P6.PRIVACY_DECLARATION,resourceFidesKey:i}),c=a.customFieldValues,u=a.upsertCustomFields,f=(0,p.useMemo)((function(){return function(e,t){return e?F(F({},e),{},{customFieldValues:t||{}}):I}(n,c)}),[n,c]),h=(0,p.useState)(!1),m=h[0],y=h[1],C=(0,p.useMemo)((function(){var e=r.filter((function(e){return e.fides_key===f.data_use}))[0];if(e)return f.name?"".concat(e.name," - ").concat(f.name):e.name}),[r,f]),x=function(){var e=(0,s.Z)(l().mark((function e(n,r){var s,i,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.customFieldValues,i=(0,o.Z)(n,Z),e.next=3,t(i,r);case 3:if(!(a=e.sent)){e.next=11;break}if(!((c=a.filter((function(e){return e.data_use===n.data_use&&(!e.name||e.name===n.name)}))).length>0)){e.next=9;break}return e.next=9,u({customFieldValues:s,fides_key:c[0].id});case 9:r.resetForm({values:n}),y(!0);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:x,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,D.jsxs)(d.xu,F(F({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[C?(0,D.jsx)(d.X6,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:C}):null,!r&&m&&!t&&f.data_use?(0,D.jsxs)(d.xv,{fontSize:"sm","data-testid":"saved-indicator",children:[(0,D.jsx)(w.St,{})," Saved"]}):null]}))},initialValues:f}},H=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,s=(0,o.Z)(e,P),i=E({onSubmit:t,initialValues:n,allDataUses:s.allDataUses,privacyDeclarationId:null===n||void 0===n?void 0:n.id}),a=i.handleSubmit,c=i.renderHeader,l=i.initialValues;return(0,D.jsx)(g.J9,{enableReinitialize:!0,initialValues:l,onSubmit:a,validationSchema:M,children:function(e){var t=e.dirty;return(0,D.jsxs)(g.l0,{children:[(0,D.jsx)(v.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,D.jsxs)(d.Kq,{spacing:4,children:[(0,D.jsx)(d.xu,{"data-testid":"header",children:c({dirty:t})}),(0,D.jsx)(A,F({onDelete:r},s))]})]})}})},B=["privacyDeclaration","onEdit","onDelete","includeCustomFields"],W=["privacyDeclarations"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,s=e.includeCustomFields,i=(0,o.Z)(e,B),a=E(U({initialValues:t,onSubmit:function(e){return n(t,e)},privacyDeclarationId:t.id},i)),c=a.initialValues,l=a.renderHeader,u=a.handleSubmit;return(0,D.jsx)(j.Qd,{children:function(e){var n=e.isExpanded;return(0,D.jsx)(g.J9,{enableReinitialize:!0,initialValues:c,onSubmit:u,validationSchema:M,children:function(e){var a=e.dirty;return(0,D.jsxs)(g.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,D.jsx)(v.Gt,{id:"".concat(t.id,"-form"),name:t.id}),(0,D.jsxs)(j.KF,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[l({dirty:a,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,D.jsx)(j.XE,{})]}),(0,D.jsx)(j.Hk,{backgroundColor:"gray.50",pt:0,children:(0,D.jsx)(d.Kq,{spacing:4,children:(0,D.jsx)(A,U({privacyDeclarationId:t.id,onDelete:r,includeCustomFields:s},i))})})]})}})}})},q=function(e){var t=e.privacyDeclarations,n=(0,o.Z)(e,W);return(0,D.jsx)(j.UQ,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,D.jsx)(R,U({privacyDeclaration:e},n),e.id)}))})},K=["id"],G=["system","addButtonProps","includeCustomFields","onSave"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){e.id;var t,n=(0,o.Z)(e,K);return X(X({},n),{},{name:null!==(t=n.name)&&void 0!==t?t:""})},J=function(e){var t=e.system,n=e.addButtonProps,a=e.includeCustomFields,c=e.onSave,j=(0,o.Z)(e,G),g=(0,u.pm)(),v=(0,C.qQ)(),b=(0,i.Z)(v,1)[0],w=(0,p.useState)(!1),k=w[0],L=w[1],O=(0,p.useState)(void 0),S=O[0],_=O[1],Z=(0,p.useMemo)((function(){var e=T(t.privacy_declarations);return S?e.filter((function(e){return e.id!==S.id})):e}),[S,t]),P=function(e){return Z.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(g((0,y.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0)},V=function(){var e=(0,s.Z)(l().mark((function e(n,r){var s,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.map((function(e){return Q(e)})),i=X(X({},t),{},{privacy_declarations:s}),a=function(e){if(!(0,x.isErrorResult)(e))return g.closeAll(),g((0,y.t5)(r?"Data use deleted":"Data use saved")),c&&c(e.data),e.data.privacy_declarations;var t=(0,m.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");g((0,y.Vo)(t))},e.next=5,b(i);case 5:return o=e.sent,e.abrupt("return",a(o));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=(0,s.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id===t.id||!P(n)){e.next=2;break}return e.abrupt("return",void 0);case 2:return r=Z.map((function(e){return e.id===t.id?n:e})),e.abrupt("return",V(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)(l().mark((function e(t){var n,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:return g.closeAll(),n=[].concat((0,r.Z)(Z),[t]),e.next=6,V(n);case 6:return(s=e.sent)&&(i=s.filter((function(e){return(!e.name||e.name===t.name)&&e.data_use===t.data_use}))[0],_(i)),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,s.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T(t.privacy_declarations).filter((function(e){return e.id!==n.id})),e.abrupt("return",V(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,s.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return(n=e.sent)&&(L(!1),_(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=t.privacy_declarations.length>0||0===t.privacy_declarations.length&&!k;return(0,p.useEffect)((function(){L(!1)}),[t.fides_key]),(0,D.jsxs)(d.Kq,{spacing:3,children:[(0,D.jsx)(q,X({privacyDeclarations:Z,onEdit:F,onDelete:I,includeCustomFields:a},j)),k?(0,D.jsx)(d.xu,{backgroundColor:"gray.50",p:4,"data-testid":"new-declaration-form",children:(0,D.jsx)(H,X({initialValues:S,onSubmit:M,onDelete:z,includeCustomFields:a},j))}):null,A?(0,D.jsx)(d.xu,{py:2,children:(0,D.jsx)(f.u,{label:"Add a Data Use",hasArrow:!0,placement:"top",isDisabled:0===Z.length,children:(0,D.jsx)(h.zx,X(X({colorScheme:"primary",size:"xs","data-testid":"add-btn",onClick:function(){L(!0),_(void 0)},disabled:k&&!S},n),{},{children:"Add a Data Use +"}))})}):null]})}},40397:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var r=n(6848),s=n(47134),i=n(75846),a=n(45128),o=n(75523),c=function(e){var t=e.includeDatasets,n=(0,o.MO)().isLoading,c=(0,s.te)().isLoading,l=(0,i.fd)().isLoading,u=(0,a.NR)(void 0,{skip:!t}).isLoading,d=(0,r.C)(o.qb),f=(0,r.C)(s.ZL),h=(0,r.C)(i.U3),p=(0,r.C)(a.nx);return{allDataCategories:d,allDataSubjects:f,allDataUses:h,allDatasets:t?p:void 0,isLoading:n||c||l||u}}},33167:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(60041)},33571:function(e){e.exports={"grid-row":"BorderGrid_grid-row__gzSVf","grid-item":"BorderGrid_grid-item__7gUTW"}}}]);
Metadata-Version: 2.1
Name: renats
Version: 0.2.2a1
Summary: 
Author: Respirens
Author-email: thesergiyprotsanin@gmail.com
Requires-Python: >=3.10,<4.0
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Dist: msgspec (>=0.15.1,<0.16.0)
Requires-Dist: typing-extensions (>=4.6.3,<5.0.0)
Requires-Dist: uuid6 (>=2023.5.2,<2024.0.0)
Description-Content-Type: text/markdown

# ReNATS

> Elegant, modern and asynchronous NATS Client API library written in pure Python

```python
import asyncio
from renats.client import NATSClient, Message

servers = (
    ("127.0.0.1", 4222),
)

client = await NATSClient().connect(servers)

# Publish message to subject 'my.subject' with payload 'My payload =)'
await client.publish("my.subject", b"My payload =)")

# Publish message to subject 'my.subject' with payload 'My payload =)',
# reply subject 'my.reply.subject' and header 'MyHeader' with value 'MyValue'
await client.publish(
    subject="my.subject",
    payload=b"My payload =)",
    reply_subject="my.reply.subject",
    headers={
        "MyHeader": "MyValue"
    }
)


# Callbacks can be sync or async (def or async def)
def callback(message: Message):
    print(f"Received message in sync callback from {message.subject}: {message.payload}")


async def async_callback(message: Message):
    await asyncio.sleep(3)
    print(f"Received message in async callback from {message.subject}: {message.payload}")


subscription = await client.subscribe("foo.bar", callback)
another_subscription = await client.subscribe("foo.baz", async_callback)

await client.publish("foo.bar", b"Hello world! (to subscription with sync callback)")
await client.publish("foo.baz", b"Hello world! (to subscription with async callback)")

await subscription.unsubscribe()
await another_subscription.unsubscribe()

# Closing client
await client.close()
```

### Installation
```bash
pip install renats
```

### TODO
- Request-Reply
- JetStream
- ObjectStorage
- Request-Reply API Framework for microservices
- And more, maybe...


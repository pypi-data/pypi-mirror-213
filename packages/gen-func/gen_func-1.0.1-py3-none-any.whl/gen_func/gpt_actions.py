import requests


def chatgpt_generate(request):
    """A function that makes the API call to GPT and returns its response

    @param request: the prompt to be fed to GPT

    @return: the code generated by GPT"""

    url = 'https://api.openai.com/v1/engines/text-davinci-003/completions'
    headers = {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 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'
    }

    data = {
        'prompt': request,
        'max_tokens': 1000,
        'temperature': 0,
        'frequency_penalty': 0.3,
        'presence_penalty': 0
    }

    response = requests.post(url, headers=headers, json=data)
    result = response.json()

    return result['choices'][0]['text']


















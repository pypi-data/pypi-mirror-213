import{o as p,r as c,E as j,j as e,g as r,W as g,a5 as b,af as f,G as m}from"./index-61767e52.js";import{p as v}from"./pluralize-853350c8.js";import{L as x}from"./popover-f6509dad.js";import{t as N}from"./transition-994df1e0.js";import{v as i,M as w,P as y}from"./disclosure-97649b9e.js";import"./_commonjs-dynamic-modules-302442b1.js";function M(){const s=g(),{errors:l,addError:t}=p(),[h,o]=c.useState(!1);c.useEffect(()=>{const a=s("errors",u);return()=>{a==null||a()}},[]);function u(a){t(j.General,a)}const n=l.size>0;return e.jsx(e.Fragment,{children:e.jsx(x,{onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},className:"flex",children:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:r("block ml-1 px-2 first-child:ml-0 rounded-full border whitespace-nowrap dark:text-neutral-100 text-xs text-center",n?"border-danger-500 text-danger-100 bg-danger-500 cursor-pointer":"border-neutral-500 cursor-default text-neutral-700"),children:n?e.jsxs("span",{children:[l.size," ",v("Error",l.size)]}):e.jsx("span",{children:"No Errors"})}),e.jsx(N,{show:h&&n,as:c.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e.jsx(x.Panel,{className:r("absolute rounded-md top-20 right-2 z-[1000] bg-light p-2 transform overflow-hidden text-danger-700 shadow-2xl","w-[90vw] max-h-[80vh]"),children:e.jsx("ul",{className:r("w-full bg-danger-10 py-4 pl-3 pr-1 rounded-md overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal","max-w-[90vw] max-h-[80vh]"),children:Array.from(l.entries()).reverse().map(([a,d])=>e.jsx("li",{className:"mb-10",children:e.jsx(E,{scope:a,error:d})},`${a}-${d.message}`))})})})]})})})}function E({error:s,scope:l}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full",children:[e.jsxs("div",{className:"w-[20rem]",children:[e.jsxs("div",{className:"flex aline-center mb-2",children:[e.jsx("small",{className:"block mr-3",children:e.jsx("small",{className:"py-0.5 px-2 bg-danger-500 text-danger-100 rounded-md text-xs",children:s.status??"UI"})}),e.jsx("small",{className:"block",children:l})]}),e.jsxs("div",{className:r("text-sm px-2"),children:[e.jsx("small",{className:"block text-xs font-mono",children:b(f(s.timestamp),"yyyy-mm-dd hh-mm-ss",!1)}),e.jsx("p",{children:s.message})]})]}),e.jsxs("div",{className:"w-full px-4",children:[s.type!=null&&e.jsxs("small",{className:"block",children:[e.jsx("b",{children:"Type"}),": ",s.type]}),s.origin!=null&&e.jsxs("small",{className:"block mb-2",children:[e.jsx("b",{children:"Origin"}),": ",s.origin]}),s.trigger!=null&&e.jsxs("small",{className:"block mb-2",children:[e.jsx("b",{children:"Trigger"}),": ",s.trigger]}),e.jsx(m,{className:"!border-danger-10"}),e.jsx("p",{className:"text-sm my-4",children:s.description})]})]}),s.traceback!=null&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"'w-full mb-4 mt-6",children:e.jsx(i,{children:({open:t})=>e.jsxs(e.Fragment,{children:[e.jsxs(i.Button,{className:r("flex items-center justify-between rounded-lg text-left w-full bg-neutral-10 px-3 mb-2"),children:[e.jsx("div",{className:"text-lg font-bold whitespace-nowrap w-full",children:e.jsx("h3",{className:"py-2",children:"Traceback"})}),e.jsx("div",{children:t?e.jsx(w,{className:"h-6 w-6 text-danger-500"}):e.jsx(y,{className:"h-6 w-6 text-danger-500"})})]}),e.jsx(i.Panel,{className:"px-2 pb-2 overflow-hidden",children:e.jsx("pre",{className:"font-mono w-full bg-dark-lighter text-lighter rounded-lg p-4 overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal max-h-[35vh] text-sm",children:e.jsx("code",{children:s.traceback??s.message})})})]})})}),e.jsx(m,{className:"!border-danger-10"})]})]})}export{E as DisplayError,M as default};
